<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <title>見積計算フォーム(チラシ)</title>
    <meta name="keywords" content="#">
    <meta name="discription" content="計算">
    <meta name="viewport" content="width=device-width, initial-scale=1, shurink-to-fit=no">
    <meta name="format-detection" content="telephone=no">
    <link rel="shortcut icon" href="#">
    <link rel="apple-touch-icon" href="#">
    <link rel="stylesheet" href="#">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class ="haikei">
<header class="header1">
<h1 class="toptitle">見積計算表</h1>
<nav class="nav">
    <ul class="sevillana-regular">
        <li class="lis"><a href="#" class="none">A3ペラ</a></li>
        <li class="lis"><a href="060601quotation.html" class="none">A4ペラ</a></li>
        <li class="lis"><a href="#" class="none">ハガキ</a></li>
    </ul>
</nav>
</header>
<main>
<form class="a4_form" name="quoform">
    <div class="zentai">
        <seciton>
            <h1>A4 ペラ</h1>
            <p>見た目・機能ともに全体的にまだかなり作成中の段階</p>
            <p>・A4ペラの用紙代計算の基本機能リリース(6/4)</p>
            <p>・連単価と包単価算出可能な仕様に変更(6/5)</p>
            <p>・クリアボタンと菊判枚数自動表示機能追加(6/6)</p>
            <p>・オンデマンド印刷代計算機能実装(階段式)(6/10)</p>
            <p>・化粧断ち料金計算機能追加(割増計算可)(6/10)</p>
            <p>物価資料掲載価格に基づいた料金を計算できます。</p>
            <p>価格は全て税抜きです。</p>
           
        </section>
    </div>
    <div class="formZen">
    <dl>
        <dt>数量(枚):</dt>
         
         <dd class="yoko"><input type="text" inputmode="numeric" pattern="\d*" class="box" name="bfp" id="mai"placeholder="入力してください" oninput="updateOutput()" ></dd>
         <dd class="yoko"><input type ="button" class="clrbtn" value="Clear" name="clr3" onclick="clearText()" /></dd>
            
        <dt>菊判必要枚数(枚):</dt>
         <dd class="yoko"><input  id="kikumai" type="text" class="box box1" placeholder="自動計算" readonly=""></dd>
        
        
        <dt>用紙(種類):</dt>
         <dd><select name="papers" id="selectPaper" class = "box" >
            <option value="" >選択してください</option>
            <option value="215">上質</option>
            <option value="224">コート</option>
            <option value="224">マットコート</option>
          </select><dd>  
        <dt>kg単価(円)<dt>
        <label><dd><input type="text" id="pptype" class="box box1" name="paper" readonly="" placeholder="用紙(種類)を選択後に表示"></dd></label>
        
        <dt>菊判連量(kg):</dt>
         <dd class ="yoko"><input id="ticketNumid" type="search" name="ticketNum" list="defaultNumbers" class="box" placeholder="入力してください"></dd>
         <dd class="yoko"><input type ="button" class="clrbtn" value="Clear" onclick="resetSearch()"></dd>
            <span class="validity"></span>
             <datalist id="defaultNumbers">
              <option value="47"></option>
              <option value="48.5"></option>
              <option value="50.5"></option>
              <option value="62.5"></option>
              <option value="76.5"></option>
              <option value="93.5"></option>
             </datalist>

         <dt>色数:</dt>
          <dd><select name="color" id="selectColor" class = "box">
             <option value="">選択してください</option>
             <option value="1">モノクロ</option>
             <option value="2">フルカラー</option>
            </select><dd>  
         
        
         <dt>印刷面:</dt>
          <dd><select name="pside" id="selectSide" class = "box">
             <option value="">選択してください</option>
             <option value="1">片面</option>
             <option value="2">両面</option>
             </select><dd>  
         
    

        <p><input type="button" id="btn" class="calc-btn" onclick="calc(ticketNum.value, papers.value, bfp.value, pside.value, color.value);" value="Calculate"></p>
        <p><input type="button" id="cl-btn" class="calc-btn" onclick="resetForm()" value="Reset Form"></p>
        
        
        <dt>用紙代単価(円):</dt>
         <dd><input id="unitleafprice" class="box " type="text" readonly=""></dd>
        <dt>用紙代(円):</dt>
         <dd><input id="leaf" class="box " type="text" readonly="" ></dd>
        <dt>印刷代(円)※通しA3:</dt>
         <dd><input id="print" class="box " type="text" readonly=""></dd>
        <dt>加工(断裁)代(円):</dt>
         <dd><input id="cut" class="box " type="text" readonly=""></dd> 
        <dt>枚単価(円):</dt>
         <dd><input id="unitprice" class="box " type="text" readonly=""></dd> 
        <dt>金額(円):</dt>
         <dd><input id="totalamount" class="box " type="text" readonly=""></dd> 

    </dl>
    </div>
</form>
</main> 
<script>
      //kg単価の数値を取得して別枠内に表示
      var select = document.getElementById('selectPaper');
      select.onchange = function(){
      let pptype_value = document.getElementById('pptype').value = (this.value);
      }
      

function updateOutput() {
            // 枚数の値をゲット
            const inputElement = document.getElementById('mai');
            const inputValue = parseFloat(inputElement.value);

            // 計算する
            const doubleValue =  Math.round((inputValue/8)*1)/1;

            // 菊判必要枚数をリアタイ表示
            const outputElement = document.getElementById('kikumai');
            outputElement.value = doubleValue;
           
        } 



function calc(ticketNum, papers, bfp, pside, color) {    
            
        
        let kikumai_value = document.getElementById('kikumai').value = Math.round((bfp/8)*1)/1;
        let unitleafprice_value = document.getElementById('unitleafprice').value = Math.round(((papers * ticketNum)*(bfp/8)/1000)/bfp);
        if( bfp <= 1999 ){
        unitleafprice_value = document.getElementById('unitleafprice').value = Math.round((((((papers * ticketNum)*(bfp/8))/1000)*2)*100)/bfp)/100 ;
        }else if(bfp >= 2000 || bfp <= 7999){
        unitleafprice_value = document.getElementById('unitleafprice').value = Math.round((((((papers * ticketNum)*(bfp/8))/1000)*1.2)*100)/bfp)/100 ;   
        }
        if( bfp >= 8000 ){
        unitleafprice_value = document.getElementById('unitleafprice').value = Math.round(((((papers * ticketNum)*(bfp/8))/1000)*100)/bfp)/100 ;
        }
    
        leaf_value= document.getElementById('leaf').value =  Math.round((unitleafprice_value *bfp)*100)/100 ;


        let print_value = document.getElementById('print').value = Math.round(bfp * 0) ;

        //モノクロ片面(A3通し)条件式
        if(color === "1"){
         if(pside === "1"){
            if(bfp/2 >=print_value && bfp/2 <= 10){
                print_value = document.getElementById('print').value = Math.abs(bfp * 40) ;
            }else if(bfp/2 >=11 && bfp/2 <= 50){
                print_value = document.getElementById('print').value = Math.abs(bfp * 37) ;
            }else if(bfp/2 >=51 && bfp/2 <= 100){
                print_value = document.getElementById('print').value = Math.abs(bfp * 35) ;
            }else if(bfp/2 >=101 && bfp/2 <= 200){
                print_value = document.getElementById('print').value = Math.abs(bfp * 32) ;
            }else if(bfp/2 >=201 && bfp/2 <= 300){
                print_value = document.getElementById('print').value = Math.abs(bfp * 30) ;
            }else if(bfp/2 >=301 && bfp/2 <= 500){
                print_value = document.getElementById('print').value = Math.abs(bfp * 27) ;
            }else if(bfp/2 >=501 && bfp/2 <= 1000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 25) ;
            }else if(bfp/2 >=1001 && bfp/2 <= 2000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 22) ;
            }else{
                print_value = document.getElementById('print').value = Math.abs(bfp * 22) ;
                
            }
      
         }
        }

        //モノクロ両面(A3通し)条件式
        if(color === "1"){
         if(pside === "2"){
            if(bfp/2 >=print_value && bfp/2 <= 10){
                print_value = document.getElementById('print').value = Math.abs(bfp * 80) ;
            }else if(bfp/2 >=11 && bfp/2 <= 50){
                print_value = document.getElementById('print').value = Math.abs(bfp * 74) ;
            }else if(bfp/2 >=51 && bfp/2 <= 100){
                print_value = document.getElementById('print').value = Math.abs(bfp * 70) ;
            }else if(bfp/2 >=101 && bfp/2 <= 200){
                print_value = document.getElementById('print').value = Math.abs(bfp * 64) ;
            }else if(bfp/2 >=201 && bfp/2 <= 300){
                print_value = document.getElementById('print').value = Math.abs(bfp * 60) ;
            }else if(bfp/2 >=301 && bfp/2 <= 500){
                print_value = document.getElementById('print').value = Math.abs(bfp * 54) ;
            }else if(bfp/2 >=501 && bfp/2 <= 1000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 50) ;
            }else if(bfp/2 >=1001 && bfp/2 <= 2000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 44) ;
            }else{
                print_value = document.getElementById('print').value = Math.abs(bfp * 22); 
                
            }
           
        
          }
        }
        //カラー片面(A3通し)条件式
        if(color === "2"){
         if(pside === "1"){
            if(bfp/2 >=print_value && bfp/2 <= 10){
                print_value = document.getElementById('print').value = Math.abs(bfp * 104) ;
            }else if(bfp/2 >=11 && bfp/2 <= 50){
                print_value = document.getElementById('print').value = Math.abs(bfp * 96) ;
            }else if(bfp/2 >=51 && bfp/2 <= 100){
                print_value = document.getElementById('print').value = Math.abs(bfp * 91) ;
            }else if(bfp/2 >=101 && bfp/2 <= 200){
                print_value = document.getElementById('print').value = Math.abs(bfp * 83) ;
            }else if(bfp/2 >=201 && bfp/2 <= 300){
                print_value = document.getElementById('print').value = Math.abs(bfp * 78) ;
            }else if(bfp/2 >=301 && bfp/2 <= 500){
                print_value = document.getElementById('print').value = Math.abs(bfp * 70) ;
            }else if(bfp/2 >=501 && bfp/2 <= 1000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 65) ;
            }else if(bfp/2 >=1001 && bfp/2 <= 2000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 57) ;
            }else{
                print_value = document.getElementById('print').value = Math.abs(bfp * 22); 
                
            }
        
         }
        }
        //カラー両面(A3通し)条件式
        if(color === "2"){
         if(pside === "2"){
            if(bfp/2 >=print_value && bfp/2 <= 10){
                print_value = document.getElementById('print').value = Math.abs(bfp * 208) ;
            }else if(bfp/2 >=11 && bfp/2 <= 50){
                print_value = document.getElementById('print').value = Math.abs(bfp * 192) ;
            }else if(bfp/2 >=51 && bfp/2 <= 100){
                print_value = document.getElementById('print').value = Math.abs(bfp * 182) ;
            }else if(bfp/2 >=101 && bfp/2 <= 200){
                print_value = document.getElementById('print').value = Math.abs(bfp * 166) ;
            }else if(bfp/2 >=201 && bfp/2 <= 300){
                print_value = document.getElementById('print').value = Math.abs(bfp * 156) ;
            }else if(bfp/2 >=301 && bfp/2 <= 500){
                print_value = document.getElementById('print').value = Math.abs(bfp * 140) ;
            }else if(bfp/2 >=501 && bfp/2 <= 1000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 130) ;
            }else if(bfp/2 >=1001 && bfp/2 <= 2000){
                print_value = document.getElementById('print').value = Math.abs(bfp * 114) ;
            }else{
                print_value = document.getElementById('print').value = Math.abs(bfp * 22); 
               
            }
        
         }
        }
            //加工（断裁）条件式
            let cut_value = document.getElementById('cut').value = Math.abs(bfp * 0) ;
            if(bfp >1 && bfp <= 1000 ){
                cut_value = document.getElementById('cut').value = Math.round((bfp * 0)+1000) ;
            }else if(bfp >1001 && bfp <= 3000){
                cut_value = document.getElementById('cut').value = Math.round(((bfp * 0.21)*1.7)*1)/1 ;
            }else if(bfp >3001 && bfp <= 7000){
                cut_value = document.getElementById('cut').value = Math.round(((bfp * 0.21)*1.3)*1)/1 ;
            }else if(bfp >7001 && bfp <= 10000){
                cut_value = document.getElementById('cut').value = Math.round((bfp * 0.21)*1)/1 ;
            }else if(bfp >10001 && bfp <= 20000){
                cut_value = document.getElementById('cut').value = Math.round(((bfp * 0.21)*0.85)*1)/1 ;
            }else if(bfp >20001 && bfp <= 30000){
                cut_value = document.getElementById('cut').value = Math.round(((bfp * 0.21)*0.80)*1)/1 ;
            }else if(bfp >30001 && bfp <= 50000){
                cut_value = document.getElementById('cut').value = Math.round(((bfp * 0.21)*0.75)*1)/1 ;
            } 
            //断裁最低料金の条件式           
            if(cut_value < 1000){
            cut_value = document.getElementById('cut').value = Math.abs((bfp * 0)+1000);
            }
            let unitprice_value = document.getElementById('unitprice').value = Math.round(((leaf_value + print_value + cut_value)/bfp)*100) /100 ;
            let totalamount_value = document.getElementById('totalamount').value = Math.round((unitprice_value * bfp)*1)/1 ;
         
            
            
      
}
  
function resetForm() {
        document.quoform.reset();
    }

function clearText() {
        var textForm1 = document.getElementById("mai");
        var textForm2 = document.getElementById("kikumai");
    
        textForm1.value = "";
        textForm2.value = "";
  
}

function resetSearch() {
            const searchElement = document.getElementById('ticketNumid');
            searchElement.value = searchElement.defaultValue;
}


// 急造した雑なツクリです。悪しからず。
</script>
</div>

</body>
</html>
